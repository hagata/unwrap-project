
var fs = require('fs');
var persistFile = fs.readFileSync('./persist.json');
var persistData = JSON.parse(persistFile);

/**
 * List Command returns the list of projects
 * @return {array} Returns the list of project names
 */
 module.exports.list = function(option) {

  console.log('Projects: ');
  for (index in persistData.projects){
    var projecetName = persistData.projects[index].project;
    var projectDirectory = persistData.projects[index].directory;

    if (option == 'dir'){
      console.log(' - ' + projecetName + ' | ' + projectDirectory);
    }else{
      console.log(" - " + projecetName)
    }
  }
}


module.exports.add = function(projectName, directory) {

  //Check if a directory is supplied, otherwise set the current directory 
  if (!directory){
    directory = process.cwd()
  }
  
  var newProject = {
    "project": projectName,
    "directory": directory
  }

  //TODO: Prompt for confirmation?
  persistData.projects.push(newProject)
  var writePersist = JSON.stringify(persistData,null,2);
  fs.writeFileSync('./persist.json', writePersist)

  console.log('Added - ' + projectName);
  
}